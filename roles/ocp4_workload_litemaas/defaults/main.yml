---
# LiteMaaS version
ocp4_workload_litemaas_version: "0.1.2"

# Namespace configuration
ocp4_workload_litemaas_namespace: "litemaas"

# Route configuration
ocp4_workload_litemaas_route_name: "rhpds"

# High Availability mode (set to true to enable HA deployment)
ocp4_workload_litemaas_ha_enabled: false

# Image configuration
ocp4_workload_litemaas_image_registry: "quay.io/rh-aiservices-bu"
ocp4_workload_litemaas_backend_image: "quay.io/rh-aiservices-bu/litemaas-backend"
ocp4_workload_litemaas_frontend_image: "quay.io/rh-aiservices-bu/litemaas-frontend"
ocp4_workload_litemaas_litellm_image: "ghcr.io/berriai/litellm-non_root"
ocp4_workload_litemaas_litellm_tag: "main-v1.74.7-stable"

# Cloud provider (auto-detected if not set)
ocp4_workload_litemaas_cloud_provider: ""

# PostgreSQL configuration
ocp4_workload_litemaas_postgres_version: "16"
ocp4_workload_litemaas_postgres_storage_size: "10Gi"
ocp4_workload_litemaas_postgres_storage_class: ""
ocp4_workload_litemaas_postgres_storage_access_mode: "ReadWriteOnce"
ocp4_workload_litemaas_postgres_password: "{{ lookup('password', '/dev/null length=32 chars=ascii_letters,digits') }}"

# Multi-user lab deployment (each user gets isolated LiteMaaS instance)
ocp4_workload_litemaas_multi_user: false
num_users: 1  # RHDP standard variable for lab environments
ocp4_workload_litemaas_user_prefix: "user"
ocp4_workload_litemaas_user_namespace_pattern: "litemaas-{{ ocp4_workload_litemaas_user_prefix }}{{ item }}"

# Multi-user common admin password (set in AgnosticV for labs, or leave empty to auto-generate)
ocp4_workload_litemaas_multi_user_common_password: ""

# Multi-user resource optimization (lighter resources for 60-80 user labs)
ocp4_workload_litemaas_multi_user_postgres_memory_request: "256Mi"
ocp4_workload_litemaas_multi_user_postgres_memory_limit: "512Mi"
ocp4_workload_litemaas_multi_user_postgres_cpu_request: "200m"
ocp4_workload_litemaas_multi_user_postgres_cpu_limit: "500m"
ocp4_workload_litemaas_multi_user_litellm_memory_request: "512Mi"
ocp4_workload_litemaas_multi_user_litellm_memory_limit: "1Gi"
ocp4_workload_litemaas_multi_user_litellm_cpu_request: "100m"
ocp4_workload_litemaas_multi_user_litellm_cpu_limit: "500m"

# JWT Secret
ocp4_workload_litemaas_jwt_secret: "{{ lookup('password', '/dev/null length=32 chars=ascii_letters,digits') }}"

# Admin API Key
ocp4_workload_litemaas_admin_api_key: "{{ lookup('password', '/dev/null length=32 chars=ascii_letters,digits') }}"

# LiteLLM configuration
ocp4_workload_litemaas_litellm_api_key: "sk-{{ lookup('password', '/dev/null length=32 chars=ascii_letters,digits') }}"
ocp4_workload_litemaas_litellm_ui_username: "admin"
ocp4_workload_litemaas_litellm_ui_password: "{{ lookup('password', '/dev/null length=16 chars=ascii_letters,digits') }}"

# OAuth configuration - DISABLED for admin-only access
# Users access models via LiteLLM virtual keys (created by admins)
ocp4_workload_litemaas_oauth_enabled: false
ocp4_workload_litemaas_oauth_provider: "openshift"  # google or openshift
ocp4_workload_litemaas_oauth_client_id: "litemaas-rhpds"
ocp4_workload_litemaas_oauth_client_secret: "{{ lookup('password', '/dev/null length=32 chars=ascii_letters,digits') }}"

# Admin access
# Admins login to LiteLLM Admin UI with UI_USERNAME/UI_PASSWORD
# Regular users get virtual keys created by admins
ocp4_workload_litemaas_admin_emails:
  - admin  # Not used when OAuth disabled

# Cluster domain (auto-detected if not set)
ocp4_workload_litemaas_cluster_domain: ""

# Resource limits
ocp4_workload_litemaas_backend_memory_limit: "512Mi"
ocp4_workload_litemaas_backend_cpu_limit: "500m"
ocp4_workload_litemaas_frontend_memory_limit: "256Mi"
ocp4_workload_litemaas_frontend_cpu_limit: "250m"
ocp4_workload_litemaas_litellm_memory_limit: "1Gi"
ocp4_workload_litemaas_litellm_cpu_limit: "1000m"

# Workload control
ocp4_workload_litemaas_remove: false

# Component deployment control
# For admin-only access, only deploy LiteLLM (no frontend/backend needed)
ocp4_workload_litemaas_deploy_frontend: false
ocp4_workload_litemaas_deploy_backend: false
ocp4_workload_litemaas_deploy_litellm: true

# Common variables (AgnosticD pattern)
become_override: false
ocp_username: "opentlc-mgr"
silent: false

# Cloud-specific storage class defaults
_ocp4_workload_litemaas_storage_class_map:
  aws: "gp3-csi"
  azure: "managed-premium"
  gcp: "standard-rwo"
  vsphere: "thin-csi"
  openstack: "standard"
  baremetal: "ocs-storagecluster-ceph-rbd"
