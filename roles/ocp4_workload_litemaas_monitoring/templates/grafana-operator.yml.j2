---
# =============================================================================
# Grafana Operator Installation
# =============================================================================
# Installs Grafana Operator using OLM (Operator Lifecycle Manager)
# Creates namespace, OperatorGroup, and Subscription
# =============================================================================

# Namespace for Grafana Operator
apiVersion: v1
kind: Namespace
metadata:
  name: {{ ocp4_workload_litemaas_monitoring_grafana_operator_namespace }}
  labels:
    app: grafana-operator
    openshift.io/cluster-monitoring: "true"

---
# OperatorGroup for Grafana Operator
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: grafana-operator-group
  namespace: {{ ocp4_workload_litemaas_monitoring_grafana_operator_namespace }}
spec:
  targetNamespaces:
    - {{ ocp4_workload_litemaas_monitoring_grafana_operator_namespace }}
    - {{ ocp4_workload_litemaas_monitoring_namespace }}

---
# Subscription to Grafana Operator
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: grafana-operator
  namespace: {{ ocp4_workload_litemaas_monitoring_grafana_operator_namespace }}
spec:
  channel: {{ ocp4_workload_litemaas_monitoring_grafana_operator_channel }}
  name: grafana-operator
  source: community-operators
  sourceNamespace: openshift-marketplace
  installPlanApproval: Automatic
